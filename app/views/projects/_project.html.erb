<%= turbo_frame_tag dom_id(project) do %>
  <div class="col">
    <div class="card h-100 shadow-sm">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span class="fw-semibold"><%= project.name %></span>

        <div class="d-flex align-items-center gap-2">
          <span class="badge bg-secondary"><%= project.expired_tasks.size %> expired</span>

          <%= button_to '', project,
                        method: :delete,
                        class: 'btn btn-close p-0',
                        form: { data: { turbo_stream: true, turbo_frame: 'projects' } } %>
        </div>
      </div>

      <ul class="list-group list-group-flush">
        <%= render partial: 'tasks/task',
                   collection: project.active_parent_tasks,
                   as: :task,
                   locals: { project: project } %>
      </ul>
    </div>
  </div>
<% end %>
